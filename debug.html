<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Frontend</title>
</head>
<body>
    <h1>üîç Debug Frontend - Portal</h1>
    
    <div style="font-family: monospace; padding: 20px;">
        <h2>1. Test Caricamento Risorse</h2>
        <button onclick="testResources()">Test Risorse</button>
        <div id="resourcesResult"></div>
        
        <h2>2. Test API Backend</h2>
        <button onclick="testAPI()">Test API</button>
        <div id="apiResult"></div>
        
        <h2>3. Console Errors</h2>
        <div id="errors" style="color: red;"></div>
    </div>
    
    <script>
        // Cattura errori
        window.addEventListener('error', (e) => {
            document.getElementById('errors').innerHTML += `<br>ERROR: ${e.message}`;
        });
        
        async function testResources() {
            const result = document.getElementById('resourcesResult');
            result.innerHTML = 'Testing...';
            
            try {
                const response = await fetch('http://localhost:3000');
                const html = await response.text();
                const hasRoot = html.includes('id="root"');
                const hasScript = html.includes('/src/main.jsx');
                
                result.innerHTML = `
                    ‚úÖ HTML Status: ${response.status}<br>
                    ${hasRoot ? '‚úÖ' : '‚ùå'} Root div presente<br>
                    ${hasScript ? '‚úÖ' : '‚ùå'} Script main.jsx presente
                `;
            } catch (e) {
                result.innerHTML = `‚ùå Error: ${e.message}`;
            }
        }
        
        async function testAPI() {
            const result = document.getElementById('apiResult');
            result.innerHTML = 'Testing...';
            
            try {
                const response = await fetch('http://localhost:8000/api/v1/public/applications');
                const data = await response.json();
                
                result.innerHTML = `
                    ‚úÖ API Status: ${response.status}<br>
                    ‚úÖ Applicazioni trovate: ${data.length}<br>
                    ${data.map(app => `- ${app.name}`).join('<br>')}
                `;
            } catch (e) {
                result.innerHTML = `‚ùå Error: ${e.message}`;
            }
        }
        
        // Auto test all'avvio
        window.onload = () => {
            testResources();
            testAPI();
        };
    </script>
</body>
</html>
